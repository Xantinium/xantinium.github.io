<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AltCraftWebApp</title>
    <script type="text/javascript" src="/ak-push.js"></script>
    <link rel="manifest" href="/manifest.json"></link>
</head>
<body>
    <button id="init_sub">Подписаться на уведомления</button>
    <button id="open_popup">Открыть попап</button>
    <script>
        document.getElementById('init_sub').addEventListener('click', () => {
            const akPush = new AKPush();
            
            try {
                akPush.initSubscription();
            } catch (err) {
                console.log('INIT ERROR', err);
            }
        });
    </script>

        <script>
            
         (function (popupFunc) {
                var script = document.createElement('script');
                var firstScript = document.getElementsByTagName('script')[0];
                var popupFuncName = popupFunc !== 'acpopup' ? '?f=' + popupFunc : '';
                window[popupFunc] = window[popupFunc] || function () {
                    (window[popupFunc].actions = window[popupFunc].actions || []).push(arguments);
                };
                window[popupFunc].last_init = 1 * new Date()
                script.async = true;
                script.src = 'https://pxl.vladislav-chapliy.dev.altkraft.com' + '/popup/v1/js/popupLibrary.js' + popupFuncName;
                firstScript.parentNode.insertBefore(script, firstScript);
         })('acpopup');
    
        </script>
        <script>
            document.getElementById('init_sub').addEventListener('click', () => {
                acpopup('create', 'AP-ADwGHoF5NCRtcvy83');
                acpopup('show', 'AP-ADwGHoF5NCRtcvy83');
            });
        </script>
    
</body>
</html>
